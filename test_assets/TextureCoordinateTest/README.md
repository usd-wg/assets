# Texture Coordinate Test

## Screenshot

![screenshot](screenshot/screenshot.png)

## Description

In this example a texture is mapped from single image 4 times onto 4 meshes.

On each mesh, a material is bound and the textureCoords with a st texture coordinate are defined that map the corners of the mesh to the unit square in uv texture space.

Below is the usda for where that is represented for `</Asset/Scenes/Scene/BackPlane/BottomRightObj/BottomRightMesh/submesh>`
```
    def Mesh "submesh" (
        prepend apiSchemas = ["MaterialBindingAPI"]
    )
    {
        ...
        rel material:binding = </Asset/Materials/UsdPreviewSurface/Materials/BottomRightMat>
        ...
        texCoord2f[] primvars:st0 = [(0.9999998, 0), (0.6000001, 0.4000001), (0.60000014, 0), (0.9999999, 0.4000001)] (
            interpolation = "vertex"
        )
    }
```

Next the material is defined to output the resulting diffuse color. This diffuse color is generated by the shader nodes. In this case our material uses the diffuse color from `UsdPreviewSurface`, `UsdPreviewSurface` gets it's diffuse color from `TextureMapper` which is assigned the texture itself. `TextureMapper` also connects to `TextureCoordinateReader` which references the st coordinates that were defined on the mesh above

from `</Materials/UsdPreviewSurface/Materials/BottomRightMat>`
```
 def Material "BottomRightMat"
{
    token outputs:surface.connect = </Asset/Materials/UsdPreviewSurface/Materials/BottomRightMat/node.outputs:surface>

    def Shader "UsdPreviewSurface"
    {
        uniform token info:id = "UsdPreviewSurface"
        float3 inputs:diffuseColor.connect = </Asset/Materials/UsdPreviewSurface/Materials/BottomRightMat/TextureMapper.outputs:rgb>
        float3 inputs:emissiveColor = (0, 0, 0)
        ...
        token outputs:surface
    }

    def Shader "TextureMapper"
    {
        uniform token info:id = "UsdUVTexture"
        float4 inputs:fallback = (1, 1, 1, 1)
        asset inputs:file = @TextureCoordinateTemplate.png@
        float4 inputs:scale = (0, 0.8, 0, 1)
        token inputs:sourceColorSpace = "sRGB"
        float2 inputs:st.connect = </Asset/Materials/UsdPreviewSurface/Materials/BottomRightMat/TextureCoordinateReader.outputs:result>
        token inputs:wrapS = "repeat"
        token inputs:wrapT = "repeat"
        float3 outputs:rgb
    }

    def Shader "TextureCoordinateReader"
    {
        uniform token info:id = "UsdPrimvarReader_float2"
        string inputs:varname = "st0"
        float2 outputs:result
    }
}

```

A complete tutorial on SimpleShading is provided by OpenUSD and includes example Python code to generate an example of texture mapping.

- [Walkthrough](https://openusd.org/release/tut_simple_shading.html)
- [Code](https://github.com/PixarAnimationStudios/OpenUSD/blob/release/extras/usd/tutorials/simpleShading/generate_simpleShading.py)


## Conversion Information
This model was converted to OpenUSD from [glTF](https://github.com/KhronosGroup/glTF-Sample-Models/tree/master/2.0/TextureCoordinateTest) with [guc](https://github.com/pablode/guc)

## License Information

Copyright 2017-2018 Analytical Graphics, Inc.
CC-BY 4.0 https://creativecommons.org/licenses/by/4.0/
Model and textures by Ed Mackey.
